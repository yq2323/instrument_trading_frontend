<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品详情 - 校园二手乐器交易平台</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/detail.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">
                <i class="fas fa-guitar"></i>
                <span>校园乐器汇</span>
            </a>
            <div class="nav-menu">
                <a href="index.html">返回首页</a>
                <a href="cart.html" id="cartLink">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span> 购物车
                </a>
                <a href="user.html">
                    <i class="fas fa-user"></i> 个人中心
                </a>
                <a href="#" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> 退出登录
                </a>
            </div>
        </div>
    </nav>

    <main class="detail-container">
        <div class="container">
            <!-- 面包屑导航 -->
            <div class="breadcrumb">
                <a href="index.html">首页</a> >
                <a href="index.html">乐器市场</a> >
                <span id="categoryName">乐器详情</span>
            </div>
            
            <!-- 商品详情区域 -->
            <div class="detail-content">
                <!-- 图片展示 -->
                <div class="detail-images">
                    <div class="main-image" id="mainImage">
                        <!-- 主图将通过JS加载 -->
                    </div>
                    <div class="thumbnail-list" id="thumbnailList">
                        <!-- 缩略图将通过JS加载 -->
                    </div>
                </div>
                
                <!-- 商品信息 -->
                <div class="detail-info">
                    <h1 class="product-title" id="productTitle">加载中...</h1>
                    
                    <div class="product-meta">
                        <div class="condition-badge" id="conditionBadge">良好</div>
                        <span class="views">
                            <i class="fas fa-eye"></i>
                            <span id="viewCount">0</span>次浏览
                        </span>
                        <span class="favorites">
                            <i class="fas fa-heart"></i>
                            <span id="favoriteCount">0</span>人收藏
                        </span>
                    </div>
                    
                    <div class="product-price">
                        <span class="current-price" id="currentPrice">¥0</span>
                        <span class="original-price" id="originalPrice"></span>
                    </div>
                    
                    <div class="product-description">
                        <h3>商品描述</h3>
                        <div class="description-content" id="descriptionContent">
                            <!-- 描述内容将通过JS加载 -->
                        </div>
                    </div>
                    
                    <div class="product-specs">
                        <div class="spec-item">
                            <span class="spec-label">品牌:</span>
                            <span class="spec-value" id="brandValue">未知</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">型号:</span>
                            <span class="spec-value" id="modelValue">未知</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">成色:</span>
                            <span class="spec-value" id="conditionValue">良好</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">位置:</span>
                            <span class="spec-value" id="locationValue">未设置</span>
                        </div>
                    </div>
                    
                    <!-- 音频试听 -->
                    <div class="audio-preview" id="audioPreview" style="display: none;">
                        <h3>音频试听</h3>
                        <div class="audio-player">
                            <audio controls id="audioPlayer">
                                <source src="" type="audio/mpeg">
                                您的浏览器不支持音频播放。
                            </audio>
                        </div>
                    </div>
                    
                    <!-- 操作按钮 -->
                    <div class="action-buttons">
                        <button class="btn btn-primary btn-lg" id="addToCartBtn">
                            <i class="fas fa-shopping-cart"></i> 加入购物车
                        </button>
                        <button class="btn btn-success btn-lg" id="buyNowBtn">
                            <i class="fas fa-bolt"></i> 立即购买
                        </button>
                        <button class="btn btn-outline" id="favoriteBtn">
                            <i class="far fa-heart"></i> 收藏
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 卖家信息 -->
            <div class="seller-info">
                <h3>卖家信息</h3>
                <div class="seller-card" id="sellerCard">
                    <!-- 卖家信息将通过JS加载 -->
                </div>
            </div>
            
            <!-- 相关推荐 -->
            <div class="related-products">
                <h3>相关推荐</h3>
                <div class="related-grid" id="relatedGrid">
                    <!-- 相关商品将通过JS加载 -->
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/instrument.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            // 获取商品ID
            const urlParams = new URLSearchParams(window.location.search);
            const instrumentId = urlParams.get('id');
            
            if (!instrumentId) {
                window.location.href = 'index.html';
                return;
            }
            
            // 加载商品详情
            await loadInstrumentDetail(instrumentId);
        });
    </script>
</body>
</html>